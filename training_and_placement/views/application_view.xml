<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
<!-- action server                      -->
        <record id="action_state_as_rejected" model="ir.actions.server" >
            <field name="name">State as rejected</field>
            <field name="type">ir.actions.server</field>
            <field name="model_id" ref="training_and_placement.model_applications_applications"/>
            <field name="binding_model_id" ref="training_and_placement.model_applications_applications"/>
            <field name="state">code</field>
            <field name="code">
                for record in records:
                    if record.state == "pending":
                        record.action_rejected()
            </field>
        </record>

<!-- form view  -->
        <record id="view_applications_form" model="ir.ui.view">
            <field name="name">applications.applications.form</field>
            <field name="model">applications.applications</field>
            <field name="arch" type="xml">
                <form string="Applications">
                    <header>
                        <field name="state" widget="statusbar" statusbar_visible="pending,rejected,selected" options="{'clickable':'1'}"/>
                    </header>
                    <sheet>
                        
                        <widget name="web_ribbon" title="Selected" bg_color="bg-success" invisible="state != 'selected'"/>
                        <widget name="web_ribbon" text="Rejected" bg_color="bg-danger" invisible="state != 'rejected'"/>
                        <widget name="web_ribbon" text="Pending" bg_color="bg-warning" invisible="state != 'pending'"/>
                            <field name="applications_id" style="font-size: 40px;" readonly="1"/>
                        <group>
                            <field name="student_id"/>
                            <field name="email"/>
                            <field name="company_id"/>
                            <field name="position_id"/>
                        </group>
                    </sheet>
                        <div class="oe_chatter">
                            <field name="message_follower_ids" widget="mail_followers"/>
                            <field name="message_ids" widget="mail_thread"/>
                            <field name="activity_ids" widget="mail_activity"/>
                        </div>
                </form>
            </field>
        </record>
 <!-- tree view  -->
        <record id="view_applications_tree" model="ir.ui.view">
            <field name="name">applications.applications.tree</field>
            <field name="model">applications.applications</field>
            <field name="arch" type="xml">
                <tree string="Applications">
                    <field name="applications_id"/>
                    <field name="student_id"/>
                    <field name="company_id"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>


        <record id="action_applications" model="ir.actions.act_window">
            <field name="name">Applications</field>
            <field name="res_model">applications.applications</field>
            <field name="view_mode">tree,form</field>
        </record>

    </data>
</odoo>
